#!/bin/bash
# Shared aliases for both bash and zsh
# This file is sourced by both ~/.bashrc and ~/.zshrc

# Basic aliases
alias tm='tmux attach || tmux new'
alias lg='lazygit'
alias v='nvim'

# Cross-platform color aliases
if [[ "$OSTYPE" == "darwin"* ]]; then
    # macOS (BSD ls)
    alias ls='ls -G -hv'
    alias grep='grep --color=auto'
    alias diff='diff'
else
    # Linux/WSL (GNU ls)
    alias ls='ls --color=auto -hv'
    alias grep='grep --color=auto'
    alias diff='diff --color=auto'
    alias ip='ip -c=auto'
fi

# Common shortcuts
alias ll='ls -l'
alias la='ls -la' 
alias l='ls -CF'

# Modern replacements (if available)
if command -v fd &>/dev/null; then
    alias find='fd'
fi
if command -v rg &>/dev/null; then
    alias grep='rg'
fi
if command -v bat &>/dev/null; then
    alias cat='bat'
fi
if command -v zoxide &>/dev/null; then
    alias cd='z'  # Use zoxide for smart directory jumping
fi

# Git aliases
alias g='git'
alias gs='git status'
alias ga='git add'
alias gc='git commit'
alias gp='git push'
alias gl='git log --oneline'
alias gd='git diff'

# Navigation
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# Safety aliases
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'

# Utility aliases
alias h='history'
alias j='jobs -l'
alias path='echo -e ${PATH//:/\\n}'
alias now='date +"%T"'
alias nowdate='date +"%d-%m-%Y"'

# Tool-specific enhancements
if command -v fzf &>/dev/null; then
    # Enhanced file/directory search
    alias ff='fzf --preview "bat --color=always --style=header,grid --line-range :300 {}"'
    alias fcd='cd $(fd --type d | fzf)'
fi

# Development shortcuts
alias serve='python3 -m http.server 8000'
alias myip='curl -s https://ipinfo.io/ip'
alias ports='netstat -tulanp'

# Make directory and cd into it
mkcd() {
    mkdir -p "$1" && cd "$1"
}

# Enhanced grep with ripgrep
if command -v rg &>/dev/null; then
    rgf() {
        rg --files-with-matches "$1" | fzf --preview "rg --color=always --line-number --no-heading --smart-case $1 {}"
    }
fi

# Quick edit common files
alias edit-aliases='$EDITOR ~/.aliases && source ~/.aliases'
alias edit-zshrc='$EDITOR ~/.zshrc && source ~/.zshrc'
alias edit-bashrc='$EDITOR ~/.bashrc && source ~/.bashrc'